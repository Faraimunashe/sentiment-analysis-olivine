{% extends "base.html" %}
{% block content %}
<div class="pagetitle mt-5 pt-4">
    <h1>{{product['name']}}</h1>
    <nav>
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/dashboard">Home</a></li>
            <li class="breadcrumb-item active">Products</li>
            <li class="breadcrumb-item active">{{product['name']}}</li>
        </ol>
    </nav>
</div><!-- End Page Title -->
<section class="section">
    <div class="row">
        <div class="col-md-4 mb-4">
            <div class="card mb-4">
                <div class="view overlay">
                    <img class="card-img-top" src="{{url_for('static', filename=image)}}" height="400" alt="Card image cap">
                    <a href="#!">
                        <div class="mask rgba-white-slight"></div>
                    </a>
                </div>
            </div>
        </div>
        <div class="col-md-8 mb-4">
            <div class="card">
                <div class="card-body pb-0">
                  <h5 class="card-title">{{product['name']}} - Polarity Analysis <span>%</span></h5>
    
                  <div id="trafficChart" style="min-height: 400px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); position: relative;" class="echart" _echarts_instance_="ec_1678830043951"><div style="position: relative; width: 274px; height: 400px; padding: 0px; margin: 0px; border-width: 0px; cursor: pointer;"><canvas data-zr-dom-id="zr_0" width="274" height="400" style="position: absolute; left: 0px; top: 0px; width: 274px; height: 400px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas></div><div class="" style="position: absolute; display: block; border-style: solid; white-space: nowrap; z-index: 9999999; box-shadow: rgba(0, 0, 0, 0.2) 1px 2px 10px; background-color: rgb(255, 255, 255); border-width: 1px; border-radius: 4px; color: rgb(102, 102, 102); font: 14px / 21px &quot;Microsoft YaHei&quot;; padding: 10px; top: 0px; left: 0px; transform: translate3d(77px, 221px, 0px); border-color: rgb(250, 200, 88); pointer-events: none; visibility: hidden; opacity: 0;"><div style="margin: 0px 0 0;line-height:1;"><div style="font-size:14px;color:#666;font-weight:400;line-height:1;">Access From</div><div style="margin: 10px 0 0;line-height:1;"><div style="margin: 0px 0 0;line-height:1;"><span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:#fac858;"></span><span style="font-size:14px;color:#666;font-weight:400;margin-left:2px">Email</span><span style="float:right;margin-left:20px;font-size:14px;color:#666;font-weight:900">580</span><div style="clear:both"></div></div><div style="clear:both"></div></div><div style="clear:both"></div></div></div></div>
    
                  <script>
                    var posv = '{{pos_count}}';
                    var negv = '{{neg_count}}';
                    var neuv = '{{neu_count}}';
                    document.addEventListener("DOMContentLoaded", () => {
                      echarts.init(document.querySelector("#trafficChart")).setOption({
                        tooltip: {
                          trigger: 'item'
                        },
                        legend: {
                          top: '5%',
                          left: 'center'
                        },
                        series: [{
                          name: 'Access From',
                          type: 'pie',
                          radius: ['40%', '70%'],
                          avoidLabelOverlap: false,
                          label: {
                            show: false,
                            position: 'center'
                          },
                          emphasis: {
                            label: {
                              show: true,
                              fontSize: '18',
                              fontWeight: 'bold'
                            }
                          },
                          labelLine: {
                            show: false
                          },
                          data: [{
                              value: posv,
                              name: 'Positive'
                            },
                            {
                              value: negv,
                              name: 'Negative'
                            },
                            {
                              value: neuv,
                              name: 'Neutral'
                            }
                          ]
                        }]
                      });
                    });
                  </script>
                </div>
            </div>
        </div>
    </div>
    <hr>
</section>
<section class="gradient-custom">
    <div class="container">
      <div class="row d-flex justify-content-center">
        <div class="col-md-12">
          <div class="card">
            <div class="card-header">
                <h3>The Reviews</h3>
            </div>
            <div class="card-body p-4">
              <div class="row">
                <div class="col">
                    {% for review in reviews %}
                        <div class="d-flex flex-start">
                            <div class="flex-grow-1 flex-shrink-1">
                                <div>
                                    <div class="d-flex justify-content-between align-items-center">
                                        <p class="mb-1">
                                            <b>{{review['name']}}</b> <span class="small">- {{review['created_at']}}</span> - <span class="badge purple mr-1">{{review['analysis']}}</span>
                                        </p>
                                    </div>
                                    <p class="small mb-0">
                                        {{review['message']}}
                                    </p>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</section>


{% endblock %}